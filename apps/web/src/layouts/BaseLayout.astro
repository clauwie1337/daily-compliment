---
import '../styles/global.css';

export interface Props {
  title: string;
}

const { title } = Astro.props;
const base = import.meta.env.BASE_URL;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href={`${base}favicon.svg`} />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />

    <!-- Apply theme before first paint -->
    <script is:inline>
      (() => {
        try {
          const themeKey = 'dc:theme';
          const themeSaved = localStorage.getItem(themeKey);
          if (themeSaved === 'light' || themeSaved === 'dark') {
            document.documentElement.setAttribute('data-theme', themeSaved);
          } else {
            document.documentElement.removeAttribute('data-theme');
          }

          const skinKey = 'dc:skin';
          const skinSaved = localStorage.getItem(skinKey);

          // Default for new users: bathroom wisdom.
          // Persisted values:
          // - 'bathroom' => bathroom wisdom
          // - 'default'  => our normal look
          if (skinSaved === 'default') {
            document.documentElement.removeAttribute('data-skin');
          } else {
            // 'bathroom' or null/unknown => bathroom.
            document.documentElement.setAttribute('data-skin', 'bathroom');
          }
        } catch {
          // ignore
        }
      })();
    </script>

    <title>{title}</title>
  </head>
  <body>
    <main class="container app">
      <slot />
    </main>
  </body>
</html>
